{{- if .Values.rabbitmq.local_setup }}

apiVersion: v1
kind: Secret
type: Opaque
metadata:
  namespace: {{ .Release.Namespace }}
  name: {{ .Release.Name }}-rabbitmqdb-secrets
data:
  RABBITMQ_DEFAULT_PASSWORD: {{ .Values.env.rabbitmq_password | default "guest" | b64enc | quote }}
---

apiVersion: v1
kind: ConfigMap
metadata:
  namespace: {{ .Release.Namespace }}
  name: {{ .Release.Name }}-rabbitmqdb-vars
data:
  RABBITMQ_DEFAULT_USER: {{ .Values.env.rabbitmq_username | default "guest" | quote }}
  RABBITMQ_DEFAULT_VHOST: {{ .Values.env.rabbitmq_vhost | default "/" | quote }}
---
{{- end}}
