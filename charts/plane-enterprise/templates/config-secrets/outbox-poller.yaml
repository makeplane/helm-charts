{{- if .Values.services.outbox_poller.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: {{ .Release.Namespace }}
  name: {{ .Release.Name }}-outbox-poller-vars
  labels:
    {{- include "plane.component.labels" (dict "componentName" "outbox-poller" "context" $) | nindent 4 }}
data:
  OUTBOX_POLLER_MEMORY_LIMIT_MB: {{ .Values.env.outbox_poller_envs.memory_limit_mb | default 400 | quote }}
  OUTBOX_POLLER_INTERVAL_MIN: {{ .Values.env.outbox_poller_envs.interval_min | default 0.25 | quote }}
  OUTBOX_POLLER_INTERVAL_MAX: {{ .Values.env.outbox_poller_envs.interval_max | default 2 | quote }}
  OUTBOX_POLLER_BATCH_SIZE: {{ .Values.env.outbox_poller_envs.batch_size | default 250 | quote }}
  OUTBOX_POLLER_MEMORY_CHECK_INTERVAL: {{ .Values.env.outbox_poller_envs.memory_check_interval | default 30 | quote }}
  OUTBOX_POLLER_POOL_SIZE: {{ .Values.env.outbox_poller_envs.pool.size | default 4 | quote }}
  OUTBOX_POLLER_POOL_MIN_SIZE: {{ .Values.env.outbox_poller_envs.pool.min_size | default 2 | quote }}
  OUTBOX_POLLER_POOL_MAX_SIZE: {{ .Values.env.outbox_poller_envs.pool.max_size | default 10 | quote }}
  OUTBOX_POLLER_POOL_TIMEOUT: {{ .Values.env.outbox_poller_envs.pool.timeout | default 30.0 | quote }}
  OUTBOX_POLLER_POOL_MAX_IDLE: {{ .Values.env.outbox_poller_envs.pool.max_idle | default 300.0 | quote }}
  OUTBOX_POLLER_POOL_MAX_LIFETIME: {{ .Values.env.outbox_poller_envs.pool.max_lifetime | default 3600 | quote }}
  OUTBOX_POLLER_POOL_RECONNECT_TIMEOUT: {{ .Values.env.outbox_poller_envs.pool.reconnect_timeout | default 5.0 | quote }}
  OUTBOX_POLLER_POOL_HEALTH_CHECK_INTERVAL: {{ .Values.env.outbox_poller_envs.pool.health_check_interval | default 60 | quote }}
---
{{- end }}
